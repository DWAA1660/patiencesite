{% extends "base.html" %}

{% block content %}
<!-- Hero Section -->
<div class="hero p-5 text-center bg-image" style="background-image: url('{{ site_settings['home_hero_bg'] if site_settings.get('home_hero_bg', '').startswith('http') else url_for('static', filename='img/' + site_settings.get('home_hero_bg', 'default_hero.jpg')) }}'); height: {{ site_settings.get('home_hero_height', '500px') }}; background-size: cover;">
    <div class="text-white w-100">
        <!-- Egg Navigation Layout -->
        <div class="egg-nav-container">
            <!-- Central Logo (Editable via 'logo' key in settings) -->
            <div class="central-logo" style="background-image: url('{{ site_settings.get('logo') if site_settings.get('logo', '').startswith('http') else url_for('static', filename='img/' + site_settings.get('logo', 'default.jpg')) }}');"></div>
            
            <!-- Eggs positioned around logo -->
            <a href="{{ url_for('shop.adult_birds') }}" class="btn btn-fall-1 btn-egg egg-pos egg-pos-1">Shop Birds</a>
            <a href="{{ url_for('main.about') }}" class="btn btn-fall-3 btn-egg egg-pos egg-pos-2">Our Story</a>
            <a href="{{ url_for('shop.hatching_eggs') }}" class="btn btn-fall-2 btn-egg egg-pos egg-pos-3">Hatching Eggs</a>
            <a href="{{ url_for('shop.chicks') }}" class="btn btn-fall-4 btn-egg egg-pos egg-pos-4">Chicks</a>

            <h1 class="mb-0 fw-bold rustic-font welcome-to-prairie">Welcome to <br> Prairie&nbsp;Homestead</h1>
        </div>
    </div>
</div>

<!-- Large Paragraph Banner -->
<div class="para-banner mb-5 mt-0">
    <div class="container">
        <h2 class="mb-3">Raising Standards, Naturally.</h2>
        <p class="lead">
            At Prairie Homestead, we believe in sustainable farming and ethical poultry raising. 
            Our birds are raised on open pastures, ensuring healthy flocks and superior quality eggs.
            Whether you are looking to start your own flock or add unique genetics, we are here to help you succeed.
        </p>
    </div>
</div>


<!-- Featured Inventory -->
<div class="container my-5">
    <h2 class="text-center mb-4">Featured Inventory</h2>
    <div class="row">
        {% for product in products %}
        <div class="col-md-4 mb-4">
            <div class="card h-100 shadow-sm">
                <img src="{{ url_for('static', filename='img/' + product.image_file) }}" class="card-img-top" alt="{{ product.name }}">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">{{ product.name }}</h5>
                    <p class="card-text text-muted">{{ product.description[:60] }}...</p>
                    <div class="mt-auto">
                        <p class="card-text fw-bold fs-5">${{ product.price }}</p>
                        <a href="{{ url_for('shop.product_detail', product_id=product.id) }}" class="btn btn-outline-primary w-100">View Details</a>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Photo Gallery -->
<div class="container my-5">
    <h2 class="text-center mb-4">Farm Gallery</h2>
    <div class="row g-3">
        {% if gallery_images %}
            {% for image in gallery_images %}
            <div class="col-md-3 col-6">
                <img src="{{ url_for('static', filename='img/' + image.image_file) }}" class="gallery-img rounded shadow-sm" alt="{{ image.caption or 'Gallery Image' }}">
            </div>
            {% endfor %}
        {% else %}
            <div class="col-12 text-center text-muted">
                <p>No images in gallery yet.</p>
            </div>
        {% endif %}
    </div>
</div>

<!-- Lightbox Modal -->
<div class="modal fade" id="galleryModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content bg-transparent border-0">
            <div class="modal-body position-relative text-center">
                <button type="button" class="btn-close btn-close-white position-absolute top-0 end-0 m-3" data-bs-dismiss="modal" aria-label="Close"></button>
                <div class="d-flex align-items-center justify-content-between">
                    <button id="lightboxPrev" class="btn btn-dark rounded-circle me-2">&lt;</button>
                    <img id="lightboxImage" src="" class="modal-img rounded shadow" alt="Full Size">
                    <button id="lightboxNext" class="btn btn-dark rounded-circle ms-2">&gt;</button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
